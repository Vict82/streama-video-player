angular.module("streama.videoPlayer",["LocalStorageModule","rzModule","streama.translations"]),Number.prototype.clamp=function(e,n){return Math.min(Math.max(this,e),n)},angular.module("streama.videoPlayer").run(["$templateCache",function(e){e.put("streama-video-player.desktop.html",'<div class="player-wrapper">\n  <div class="video-wrapper-inner"  ng-mousemove="showControls()">\n    <div>\n      <div class="volume-info" ng-show="volumeChanged">\n        {{volumeLevel * 10}}% Volume\n      </div>\n\n      <div class="volume-info" ng-show="currentTimeChanged">\n        <br>\n        <strong ng-show="currentTime">\n          <span>{{currentTime | streamaVideoTime}}</span>\n        </strong>\n        <span>{{videoDuration | streamaVideoTime}}</span>\n      </div>\n    </div>\n\n    <i class="ion-android-arrow-back player-back" ng-class="{\'visible\': controlsVisible}" ng-click="closeVideo()"></i>\n\n\n    <div class="spinner" ng-show="loading">\n      <div class="bounce1"></div>\n      <div class="bounce2"></div>\n      <div class="bounce3"></div>\n    </div>\n\n    <div class="overlay" ng-class="{\'visible\': overlayVisible}" ng-if="options.videoOverlayEnabled">\n      <div class="video-info">\n        <p>You\'re watching</p>\n\n        <h1>{{options.videoMetaTitle}}</h1>\n        <h3>{{options.videoMetaSubtitle}}</h3>\n        <p ng-if="!isMobile">{{options.videoMetaDescription}}</p>\n      </div>\n    </div>\n\n    <i ng-if="isMobile && !playing && canplay" class="play-button ion-ios-play" ng-click="pause();play()"></i>\n\n    <div class="player-controls-wrapper player-active no-select" ng-class="{\'visible\': controlsVisible}" ng-hide="loading && !initialPlay">\n\n      <div class="slider-ui-wrapper" ng-show="!volumeOpen">\n        <div class="scrupper-wrapper">\n          <rzslider rz-slider-model="currentTime" rz-slider-options="scrubber.options"></rzslider>\n        </div>\n\n        <!--<div id="playerDurationSlider" class="player-ui-slider" ui-slider="scrubberOptions" min="0" max="{{videoDuration}}" ng-model="currentTime"></div>-->\n        <div class="time-display">\n          <strong ng-show="currentTime">\n            <span>{{currentTime | streamaVideoTime}}</span>\n          </strong>\n          <span>{{videoDuration | streamaVideoTime}}</span>\n        </div>\n      </div>\n\n      <section class="player-control-bar no-select">\n\n        <div class="player-control-button player-play-pause play ion-play" ng-show="!playing" ng-click="play()"></div>\n\n        <div class="player-control-button player-play-pause play ion-pause" ng-show="playing" ng-click="pause()"></div>\n\n        <div class="volume-control player-control-button volume" ng-mouseleave="volumeOpen = false" ng-mouseenter="volumeOpen = true">\n          <i ng-class="{\n        \'ion-volume-mute\': volumeLevel == 0,\n        \'ion-volume-low\': volumeLevel > 0 && volumeLevel < 3,\n        \'ion-volume-medium\': volumeLevel >= 3 && volumeLevel < 6,\n        \'ion-volume-high\': volumeLevel >= 6\n        }" ng-click="playerVolumeToggle()"\n          ></i>\n\n          <div id="player-menu-volume" class="player-menu" ng-show="volumeOpen">\n            <div class="volume-menu-content">\n              <rzslider style="height: 120px;" rz-slider-model="volumeLevel" rz-slider-options="volume.options"></rzslider>\n            </div>\n          </div>\n        </div>\n\n\n        <div class="player-status">\n          <span class="player-status-main-title">{{options.videoMetaTitle}}</span>\n          <span>{{options.videoMetaSubtitle}}</span>\n        </div>\n\n        <div class="player-control-button player-next-episode ion-ios-skipforward" ng-if="options.showNextButton" ng-click="next()"></div>\n\n        <div class="player-control-button player-episode-selector" ng-if="options.showEpisodeBrowser">\n          <i class="ion-ios-browsers" ng-click="episodeBrowseOpen = !episodeBrowseOpen"></i>\n          <div id="player-menu-episode-selector" class="player-menu" ng-show="episodeBrowseOpen">\n            <div class="episode-selector-container">\n              <div class="episode-selector-slider" ng-class="{\'slide-left\': options.selectedEpisodes}">\n                <div class="season-list-container">\n                  <h2 class="seasons-title">{{options.videoMetaTitle}}</h2>\n                  <ul class="season-list">\n                    <li class="season" ng-click="toggleSelectEpisodes(episodes)"\n                        ng-repeat="(season, episodes) in options.episodeList">\n                      <span>{{\'VIDEO.SEASON\' | translate}} {{season}}</span>\n                    </li>\n                  </ul>\n                </div>\n              </div>\n\n              <div class="episode-selector-slider" ng-class="{\'slide-left\': options.selectedEpisodes}">\n                <div class="season-list-container">\n                  <h2 class="seasons-title" ng-click="toggleSelectEpisodes()">\n                    <span class="back-button"><i class="ion-chevron-left"></i></span>\n                    {{\'VIDEO.SEASON\' | translate}} {{options.selectedEpisodes[0].season_number}}\n                  </h2>\n                  <ul class="episode-list">\n                    <li class="episode" ng-repeat="episode in options.selectedEpisodes"\n                        ng-class="{\'current\': (episode.episode_number == options.currentEpisode.episode && episode.season_number == options.currentEpisode.season), \'no-files\': !episode.hasFile}" >\n                      <div class="flex-wrapper">\n                        <span class="episode-number">{{episode.episode_number | streamaPadnumber:2}}</span>\n                        <span class="episode-name" ng-click="visible = !visible">{{episode.name}}</span>\n                        <span class="episode-play" ng-if="episode.hasFile" ui-sref="player({videoId: episode.id})"><i class="ion-play"></i></span>\n                      </div>\n\n                      <div class="extra-episode-info" ng-if="visible || (episode.episode_number == video.episode_number && episode.season_number == video.season_number)">\n                        <div class="image-wrapper">\n                          <img ng-if="episode.still_path" ng-src="https://image.tmdb.org/t/p/w92/{{episode.still_path}}"/>\n                          <div ng-if="!episode.still_path" class="fallback-image"></div>\n                        </div>\n\n                        <p>{{episode.overview.length > 250 ? (episode.overview.substring(0, 250) + \'...\') : episode.overview}}</p>\n                      </div>\n                    </li>\n                  </ul>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div class="player-control-button player-fill-screen ion-android-wifi" ng-if="options.showSocketSession" ng-click="createNewPlayerSession()"></div>\n\n        <div class="player-control-button player-fill-screen ion-android-textsms" ng-if="options.videoTrack" ng-class="{\'inactive\': !isTextTrackVisible}" ng-click="toggleTextTrack()"></div>\n\n        <div class="player-control-button player-fill-screen"\n             ng-click="fullScreen()" ng-class="{\'ion-arrow-shrink\': isFullScreen, \'ion-arrow-expand\': !isFullScreen}"></div>\n      </section>\n    </div>\n\n\n    <video ng-if="isInitialized" id="video" ng-src="{{options.videoSrc}}" type="{{options.videoType}}" ng-click="clickVideo()">\n      <track ng-if="options.videoTrack" ng-src="{{options.videoTrack}}" kind="subtitles" srclang="en" label="English">\n    </video>\n\n  </div>\n</div>\n\n\n'),e.put("streama-video-player.episodeSelector.html",'<div class="mobile-episode-selector-container">\n  <div class="mobile-episode-selector-season-tabs">\n    <div class="mobile-episode-selector-season-tab" ng-repeat="(season, episodes) in options.episodeList">\n      <span>{{\'VIDEO.SEASON\' | translate}} {{season}}</span>\n    </div>\n  </div>\n\n  <div class="mobile-episode-selector-outer">\n    <div class="mobile-episode-selector-inner">\n      <div class="mobile-episode-box" ng-repeat="episode in options.selectedEpisodes" ng-class="{\'active\': episode.id == options.currentEpisode.id}">\n        <div class="image-wrapper">\n          <img ng-if="episode.still_path" ng-src="{{episode.still_path}}"/>\n          <div ng-if="!episode.still_path" class="fallback-image"></div>\n        </div>\n        <h3>\n          <span class="episode-number">{{episode.episode_number}}. </span>\n          <span class="episode-name" ng-click="visible = !visible">{{episode.name}}</span>\n\n          <span class="episode-duration">{{episode.videoDuration | videoDurationDisplay}}</span>\n        </h3>\n        <p class="episode-overview">{{episode.overview.length > 250 ? (episode.overview.substring(0, 250) + \'...\') : episode.overview}}</p>\n      </div>\n    </div>\n  </div>\n\n  \n</div>'),e.put("streama-video-player.html",'<div>\n  <pre>{{playerTemplate}}</pre>\n  <div ng-if="playerTemplate" ng-include="playerTemplate"></div>\n\n</div>\n\n'),e.put("streama-video-player.touch.html",'<div class="player-wrapper">\n  <div class="video-wrapper-inner">\n    <div class="spinner" ng-show="loading">\n      <div class="bounce1"></div>\n      <div class="bounce2"></div>\n      <div class="bounce3"></div>\n    </div>\n\n    <i ng-if="!playing && canplay" class="play-button ion-ios-play" ng-click="$event.stopPropagation();togglePlay()"></i>\n\n    <!--<div class="player-controls-wrapper player-active no-select" ng-class="{\'visible\': controlsVisible}" ng-hide="loading && !initialPlay">-->\n\n      <!--<div class="slider-ui-wrapper" ng-show="!volumeOpen">-->\n        <!--<div class="scrupper-wrapper">-->\n          <!--<rzslider rz-slider-model="currentTime" rz-slider-options="scrubber.options"></rzslider>-->\n        <!--</div>-->\n\n        <!--&lt;!&ndash;<div id="playerDurationSlider" class="player-ui-slider" ui-slider="scrubberOptions" min="0" max="{{videoDuration}}" ng-model="currentTime"></div>&ndash;&gt;-->\n        <!--<div class="time-display">-->\n          <!--<strong ng-show="currentTime">-->\n            <!--<span>{{currentTime | streamaVideoTime}}</span>-->\n          <!--</strong>-->\n          <!--<span>{{videoDuration | streamaVideoTime}}</span>-->\n        <!--</div>-->\n      <!--</div>-->\n\n      <!--<section class="player-control-bar no-select">-->\n\n        <!--<div class="player-control-button player-play-pause play ion-play" ng-show="!playing" ng-click="play()"></div>-->\n\n        <!--<div class="player-control-button player-play-pause play ion-pause" ng-show="playing" ng-click="pause()"></div>-->\n\n        <!--<div class="volume-control player-control-button volume" ng-mouseleave="volumeOpen = false" ng-mouseenter="volumeOpen = true">-->\n          <!--<i ng-class="{-->\n        <!--\'ion-volume-mute\': volumeLevel == 0,-->\n        <!--\'ion-volume-low\': volumeLevel > 0 && volumeLevel < 3,-->\n        <!--\'ion-volume-medium\': volumeLevel >= 3 && volumeLevel < 6,-->\n        <!--\'ion-volume-high\': volumeLevel >= 6-->\n        <!--}" ng-click="playerVolumeToggle()"-->\n          <!--&gt;</i>-->\n\n          <!--<div id="player-menu-volume" class="player-menu" ng-show="volumeOpen">-->\n            <!--<div class="volume-menu-content">-->\n              <!--<rzslider style="height: 120px;" rz-slider-model="volumeLevel" rz-slider-options="volume.options"></rzslider>-->\n            <!--</div>-->\n          <!--</div>-->\n        <!--</div>-->\n\n\n        <!--<div class="player-status">-->\n          <!--<span class="player-status-main-title">{{options.videoMetaTitle}}</span>-->\n          <!--<span>{{options.videoMetaSubtitle}}</span>-->\n        <!--</div>-->\n\n        <!--<div class="player-control-button player-next-episode ion-ios-skipforward" ng-if="options.showNextButton" ng-click="next()"></div>-->\n\n        <!--<div class="player-control-button player-episode-selector" ng-if="options.showEpisodeBrowser">-->\n          <!--<i class="ion-ios-browsers" ng-click="episodeBrowseOpen = !episodeBrowseOpen"></i>-->\n          <!--<div id="player-menu-episode-selector" class="player-menu" ng-show="episodeBrowseOpen">-->\n            <!--<div class="episode-selector-container">-->\n              <!--<div class="episode-selector-slider" ng-class="{\'slide-left\': options.selectedEpisodes}">-->\n                <!--<div class="season-list-container">-->\n                  <!--<h2 class="seasons-title">{{options.videoMetaTitle}}</h2>-->\n                  <!--<ul class="season-list">-->\n                    <!--<li class="season" ng-click="toggleSelectEpisodes(episodes)"-->\n                        <!--ng-repeat="(season, episodes) in options.episodeList">-->\n                      <!--<span>{{\'VIDEO.SEASON\' | translate}} {{season}}</span>-->\n                    <!--</li>-->\n                  <!--</ul>-->\n                <!--</div>-->\n              <!--</div>-->\n\n              <!--<div class="episode-selector-slider" ng-class="{\'slide-left\': options.selectedEpisodes}">-->\n                <!--<div class="season-list-container">-->\n                  <!--<h2 class="seasons-title" ng-click="toggleSelectEpisodes()">-->\n                    <!--<span class="back-button"><i class="ion-chevron-left"></i></span>-->\n                    <!--{{\'VIDEO.SEASON\' | translate}} {{options.selectedEpisodes[0].season_number}}-->\n                  <!--</h2>-->\n                  <!--<ul class="episode-list">-->\n                    <!--<li class="episode" ng-repeat="episode in options.selectedEpisodes"-->\n                        <!--ng-class="{\'current\': (episode.episode_number == options.currentEpisode.episode && episode.season_number == options.currentEpisode.season), \'no-files\': !episode.hasFile}" >-->\n                      <!--<div class="flex-wrapper">-->\n                        <!--<span class="episode-number">{{episode.episode_number | streamaPadnumber:2}}</span>-->\n                        <!--<span class="episode-name" ng-click="visible = !visible">{{episode.name}}</span>-->\n                        <!--<span class="episode-play" ng-if="episode.hasFile" ui-sref="player({videoId: episode.id})"><i class="ion-play"></i></span>-->\n                      <!--</div>-->\n\n                      <!--<div class="extra-episode-info" ng-if="visible || (episode.episode_number == video.episode_number && episode.season_number == video.season_number)">-->\n                        <!--<div class="image-wrapper">-->\n                          <!--<img ng-if="episode.still_path" ng-src="https://image.tmdb.org/t/p/w92/{{episode.still_path}}"/>-->\n                          <!--<div ng-if="!episode.still_path" class="fallback-image"></div>-->\n                        <!--</div>-->\n\n                        <!--<p>{{episode.overview.length > 250 ? (episode.overview.substring(0, 250) + \'...\') : episode.overview}}</p>-->\n                      <!--</div>-->\n                    <!--</li>-->\n                  <!--</ul>-->\n                <!--</div>-->\n              <!--</div>-->\n            <!--</div>-->\n          <!--</div>-->\n        <!--</div>-->\n\n        <!--<div class="player-control-button player-fill-screen ion-android-wifi" ng-if="options.showSocketSession" ng-click="createNewPlayerSession()"></div>-->\n\n        <!--<div class="player-control-button player-fill-screen ion-android-textsms" ng-if="options.videoTrack" ng-class="{\'inactive\': !isTextTrackVisible}" ng-click="toggleTextTrack()"></div>-->\n\n        <!--<div class="player-control-button player-fill-screen"-->\n             <!--ng-click="fullScreen()" ng-class="{\'ion-arrow-shrink\': isFullScreen, \'ion-arrow-expand\': !isFullScreen}"></div>-->\n      <!--</section>-->\n    <!--</div>-->\n\n    <div class="player-controls-mobile" ng-show="isMobileControlsVisible" ng-click="hideMobileControls()">\n      <div class="player-controls-topbar">\n        <div class="player-controls-box player-control-button" ng-click="$event.stopPropagation();">\n          <i class="ion-chevron-left"></i>\n        </div>\n        <div class="player-controls-stretch player-controls-metaTitle">\n          {{options.videoMetaTitle}}\n        </div>\n\n        <div class="player-controls-box player-control-button" ng-click="$event.stopPropagation(); toggleMobileOverlayBox();">\n          <i class="ion-android-textsms"></i>\n        </div>\n\n        <div class="player-controls-box player-control-button" ng-click="$event.stopPropagation(); toggleMobileOverlayBox()">\n          <i class="ion-ios-browsers"></i>\n        </div>\n\n      </div>\n      <div class="player-controls-bottombar">\n        <div class="player-controls-box player-control-button" ng-click="$event.stopPropagation();togglePlay()">\n          <i class="player-play-pause play ion-play" ng-show="!playing"></i>\n          <i class="player-play-pause play ion-pause" ng-show="playing"></i>\n        </div>\n        <div class="player-controls-stretch">\n          <rzslider ng-if="scrubber.options" rz-slider-model="currentTime" rz-slider-options="scrubber.options"></rzslider>\n        </div>\n        <div class="player-controls-box">\n          <div class="time-display">\n            {{videoDuration | streamaVideoTime}}\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div class="player-controls-mobile-overlay-box" ng-show="isMobileOverlayBoxVisible">\n      <i class="ion-close player-controls-mobile-overlay-box-close" ng-click="toggleMobileOverlayBox()"></i>\n\n      <div ng-include="\'streama-video-player.episodeSelector.html\'"></div>\n    </div>\n\n    <video ng-if="isInitialized" id="video" ng-src="{{options.videoSrc}}" type="{{options.videoType}}" ng-click="clickVideo()">\n      <track ng-if="options.videoTrack" ng-src="{{options.videoTrack}}" kind="subtitles" srclang="en" label="English">\n    </video>\n\n  </div>\n</div>\n\n\n')}]),angular.module("streama.videoPlayer").directive("streamaVideoPlayer",["localStorageService","$timeout","$http","streamaVideoPlayerService","$filter",function(e,n,i,o,s){return{restrict:"AE",templateUrl:"streama-video-player.touch.html",scope:{options:"="},link:function(s,l,a){function t(){s.isInitialized=!0,l.addClass("nocursor"),s.options.isTouch||($(),o.initMousetrap(B,s,F,_)),f(),C(),s.$on("$destroy",w),s.$on("$stateChangeSuccess",h),p(),n(function(){var e=l.find("video");e.bind("contextmenu",function(){return!1}),B=e[0],B.oncanplay=E,B.onwaiting=M,B.onplaying=x,B.onerror=S,B.ontimeupdate=k,B.addEventListener("ended",T)})}function r(){l.removeClass("nocursor"),n.cancel(N),n.cancel(q),s.controlsVisible=!0,s.overlayVisible=!1,N=n(function(){s.controlsVisible=!1,s.playing?l.addClass("nocursor"):q=n(function(){s.playing||(s.overlayVisible=!0)},5e3)},1e3)}function c(e){s.scrubber={options:{floor:0,ceil:e,step:1,hideLimitLabels:!0,hidePointerLabels:!0,showSelectionBar:!0,onStart:function(){U=!1},onEnd:function(e,n,i,o){B.currentTime=n,s.currentTime=n,U=!0}}}}function p(){s.volumeLevel=e.get("volumeLevel")||5,s.volume={options:{floor:0,ceil:10,step:.1,hideLimitLabels:!0,hidePointerLabels:!0,showSelectionBar:!0,vertical:!0,onChange:function(e,n,i,o){b(n)}}}}function d(){1==s.isFullScreen&&s.fullScreen(),s.options.onClose()}function u(){s.isMobileControlsVisible=!0,s.options.onVideoClick()}function v(){s.isMobileControlsVisible=!1}function m(){s.isMobileOverlayBoxVisible=!s.isMobileOverlayBoxVisible}function g(){var e,n=document;e=s.isMobile?B:document.documentElement;var i=window.innerHeight==screen.height;i?(s.isFullScreen=!1,n.exitFullscreen?n.exitFullscreen():n.mozCancelFullScreen?n.mozCancelFullScreen():n.webkitExitFullscreen?n.webkitExitFullscreen():n.msExitFullscreen&&n.msExitFullscreen()):(s.isFullScreen=!0,e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullScreen?e.webkitRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen())}function b(n){var i=n/10;B.volume=i,s.options.rememberVolumeSetting&&e.set("volumeLevel",n)}function y(){0==s.volumeLevel?s.volumeLevel=5:s.volumeLevel=0}function f(){s.$on("triggerVideoPlay",function(e,n){s.play(n)}),s.$on("triggerVideoPause",function(e,n){s.pause(n)}),s.$on("triggerVideoToggle",function(e,n){s.playing?s.pause(n):s.play(n)}),s.$on("triggerVideoTimeChange",function(e,n){B.currentTime=n.currentPlayerTime,s.currentTime=n.currentPlayerTime})}function h(e,n){"player"!=n.name&&(s.isFullScreen=!0)&&s.fullScreen()}function w(){Mousetrap.reset(),console.log("destroy"),B.pause(),B.src="",l.find("video").children("source").prop("src",""),l.find("video").remove().length=0}function k(e){U&&(s.currentTime=B.currentTime,s.$apply(),R&&(null==j&&(j=s.options.currentEpisode),j.intro_start<this.currentTime&&this.currentTime<j.intro_end&&(B.currentTime=j.intro_end)))}function T(){s.options.showNextButton&&s.options.onNext()}function S(){B.duration||s.initialPlay||s.options.onError()}function x(){s.loading=!1}function E(){s.initialPlay||(s.canplay=!0,console.log("%c oncanplay","color: deeppink; font-weight: bold; text-shadow: 0 0 5px deeppink;"),s.loading=!1,s.isMobile?s.pause():s.play(),s.videoDuration=B.duration,c(B.duration),B.currentTime=s.options.customStartingTime||0,s.currentTime=B.currentTime||0,s.initialPlay=!0,s.options.videoTrack&&(B.textTracks[0].mode="hidden"))}function M(){s.loading=!0}function V(e){s.options.selectedEpisodes=e}function L(e){B.pause(),s.playing=!1,s.options.onPause(B,e)}function O(){s.playing?L():P()}function P(e){B.play(),s.playing=!0,s.options.onPlay(B,e),s.overlayVisible=!1}function z(){s.options.onSocketSessionCreate()}function D(){s.isTextTrackVisible=!s.isTextTrackVisible,s.isTextTrackVisible?B.textTracks[0].mode="showing":B.textTracks[0].mode="hidden"}function _(e){s.volumeChanged=!0,n.cancel(I),s.volumeLevel+=e,s.volumeLevel=s.volumeLevel.clamp(0,10),s.$apply(),I=n(function(){s.volumeChanged=!1},1500)}function C(){s.isMobile=s.options.isMobile}function F(){s.currentTimeChanged=!0,s.options.onTimeChange(B.currentTime,s.videoDuration),n.cancel(A),s.$apply(),A=n(function(){s.currentTimeChanged=!1},1e4)}function $(){jQuery(l).mousewheel(function(e){e.deltaY>0?_(1):e.deltaY<0&&_(-1),s.showControls()})}s.options=o.initOptions(s.options);var B,N,q,I,A,j=null,R=!0,Y=s.options.videoSrc.toString(),U=!0;s.showControls=r,s.toggleSelectEpisodes=V,s.createNewPlayerSession=z,s.toggleTextTrack=D,s.playerVolumeToggle=y,s.play=P,s.togglePlay=O,s.pause=L,s.closeVideo=d,s.hideMobileControls=v,s.toggleMobileOverlayBox=m,s.clickVideo=u,s.fullScreen=g,s.currentTime=0,s.next=s.options.onNext,s.isMobileControlsVisible=!0,s.isInitialized=!1,s.loading=!0,s.initialPlay=!1,s.verticalSlider1={value:5,options:{floor:0,ceil:10,vertical:!0}},s.options.isExternalLink?t():i.head(Y).success(function(){t()}).error(function(e,n){406==n&&s.options.onError("FILE_IN_FS_NOT_FOUND")})}}}]),angular.module("streama.videoPlayer").filter("streamaPadnumber",[function(){function e(e,n,i){return i=i||"0",e+="",e.length>=n?e:new Array(n-e.length+1).join(i)+e}return function(n,i){return e(n,i)}}]),angular.module("streama.videoPlayer").filter("videoDurationDisplay",["$filter",function(e){return function(n){var i=new Date(1970,0,1).setSeconds(n);return e("date")(i,"mm")+" Min."}}]),angular.module("streama.videoPlayer").filter("streamaVideoTime",["$filter",function(e){return function(n){var i=new Date(1970,0,1).setSeconds(n);return n>=3600?e("date")(i,"hh:mm:ss"):e("date")(i,"mm:ss")}}]),angular.module("streama.videoPlayer").factory("streamaVideoPlayerService",["localStorageService","$timeout","$http",function(e,n,i){function o(){return{customStartingTime:0,isMobile:null,rememberVolumeSetting:!0,videoMetaTitle:"",videoMetaSubtitle:"",videoMetaDescription:"",videoSrc:"",videoType:"",videoTrack:"",videoOverlayEnabled:!0,showEpisodeBrowser:!1,showNextButton:!1,showSocketSession:!0,episodeList:{},selectedEpisodes:null,currentEpisode:{},onSocketSessionCreate:angular.noop,onTimeChange:angular.noop,onError:angular.noop,onPlay:angular.noop,onPause:angular.noop,onClose:angular.noop,onNext:angular.noop,onVideoClick:angular.noop,isTouch:!1}}function s(e){return e=e||{},!e.selectedEpisodes&&e.showEpisodeBrowser&&e.currentEpisode&&e.episodeList&&(e.selectedEpisodes=e.episodeList[e.currentEpisode.season]),e.videoMetaTitle||(e.videoMetaTitle=e.videoSrc),e=angular.merge(o(),e),void 0==e.isMobile&&(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0,4))?e.isMobile=!0:e.isMobile=!1),e}function l(e,n,i,o){Mousetrap.bind("left",function(n){n.preventDefault(),i(),e.currentTime-=a},"keyup"),Mousetrap.bind("right",function(n){n.preventDefault(),i(),e.currentTime+=a},"keyup"),Mousetrap.bind("ctrl+right",function(n){n.preventDefault(),i(),e.currentTime+=t},"keyup"),Mousetrap.bind("ctrl+left",function(n){n.preventDefault(),i(),e.currentTime-=t},"keyup"),Mousetrap.bind("alt+enter",function(e){e.preventDefault(),n.fullScreen()}),Mousetrap.bind(["backspace","del"],function(e){e.preventDefault(),n.closeVideo()}),Mousetrap.bind("s",function(e){e.preventDefault(),n.toggleTextTrack()}),Mousetrap.bind("up",function(e){e.preventDefault(),o(1)}),Mousetrap.bind("down",function(e){e.preventDefault(),o(-1)}),Mousetrap.bind("m",function(e){e.preventDefault(),n.playerVolumeToggle(),n.showControls()}),Mousetrap.bind("e",function(e){e.preventDefault(),n.toggleSelectEpisodes(),n.showControls()}),Mousetrap.bind("space",function(){n.playing?n.pause():n.play(),n.$apply()})}var a=20,t=60;return{getDefaultOptions:o,initOptions:s,initMousetrap:l}}]);